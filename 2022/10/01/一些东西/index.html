

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/2.png">
  <link rel="icon" href="/img/2.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="luo">
  <meta name="keywords" content="">
  
    <meta name="description" content="指令执行周期 取指令，译码，执行 加载执行程序 11.磁盘寻找文件 2.访问文件信息 3.加载程序之内存 4.执行指令，分配Process ID 5.进程自动运行 6.进程结束后从内存中移除  32位x86处理器 123操作模式：保护模式，虚拟8086模式（保护模式子模式），实地址模式，系统管理模式xmm寄存器  64位x86处理器 123456789向后兼容x86指令集地址长度64位，虚拟地址">
<meta property="og:type" content="article">
<meta property="og:title" content="一些东西">
<meta property="og:url" content="http://example.com/2022/10/01/%E4%B8%80%E4%BA%9B%E4%B8%9C%E8%A5%BF/index.html">
<meta property="og:site_name" content="Luo&#39;s Blog">
<meta property="og:description" content="指令执行周期 取指令，译码，执行 加载执行程序 11.磁盘寻找文件 2.访问文件信息 3.加载程序之内存 4.执行指令，分配Process ID 5.进程自动运行 6.进程结束后从内存中移除  32位x86处理器 123操作模式：保护模式，虚拟8086模式（保护模式子模式），实地址模式，系统管理模式xmm寄存器  64位x86处理器 123456789向后兼容x86指令集地址长度64位，虚拟地址">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blogimages-1307841632.cos.ap-guangzhou.myqcloud.com/img/202304131138318.png">
<meta property="article:published_time" content="2022-09-30T16:00:00.000Z">
<meta property="article:modified_time" content="2023-08-04T07:13:38.203Z">
<meta property="article:author" content="luo">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blogimages-1307841632.cos.ap-guangzhou.myqcloud.com/img/202304131138318.png">
  
  
  
  <title>一些东西 - Luo&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.2","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Luo's Blog" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Luo&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">一些东西</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-10-01 00:00" pubdate>
          2022年10月1日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          9.7k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          82 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">一些东西</h1>
            
            
              <div class="markdown-body">
                
                <hr>
<p>指令执行周期</p>
<p>取指令，译码，执行</p>
<p>加载执行程序</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>.磁盘寻找文件 <span class="hljs-number">2</span>.访问文件信息 <span class="hljs-number">3</span>.加载程序之内存 <span class="hljs-number">4</span>.执行指令，分配Process ID <span class="hljs-number">5</span>.进程自动运行 <span class="hljs-number">6</span>.进程结束后从内存中移除<br></code></pre></td></tr></table></figure>

<p>32位x86处理器</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">操作模式：保护模式，虚拟8086模式（保护模式子模式），实地址模式，系统管理模式<br><br>xmm寄存器<br></code></pre></td></tr></table></figure>

<p>64位x86处理器</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs llvm">向后兼容<span class="hljs-keyword">x</span><span class="hljs-number">86</span>指令集<br><br>地址长度<span class="hljs-number">64</span>位，虚拟地址控件位<span class="hljs-number">2</span>的<span class="hljs-number">64</span>次方字节<span class="hljs-number">2</span><br><br>可以使用<span class="hljs-number">64</span>位通用寄存器，运行指令具有<span class="hljs-number">64</span>位整数操作数<br><br>比<span class="hljs-keyword">x</span><span class="hljs-number">86</span>多了<span class="hljs-number">8</span>各通用寄存器<br><br>物理地址为<span class="hljs-number">48</span>位，支持<span class="hljs-number">256</span>TB的RAM<br></code></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">操作模式：兼容模式，64位模式    <br></code></pre></td></tr></table></figure>

<p>I&#x2F;O访问层次</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">高级语言函数<br>操作系统（<span class="hljs-built_in">os</span>）<br>BIOS<br>硬件<br></code></pre></td></tr></table></figure>

<p>汇编语言基本元素</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">整数常量 <span class="hljs-number">0A3h</span>（<span class="hljs-number">16</span>进制<span class="hljs-number">0</span> h） <span class="hljs-number">19d</span>（<span class="hljs-number">10</span>进制，可以不写）<span class="hljs-number">23q</span>/o（八进制） <span class="hljs-number">10011b</span>（二进制）<br>实数常量 <span class="hljs-number">2</span> <span class="hljs-number">3.0</span> +<span class="hljs-number">3.0</span> -<span class="hljs-number">44.2E+5</span> <span class="hljs-number">26.E5</span><br>字符常量 ‘A’ <span class="hljs-string">&quot;A&quot;</span><br>字符串常量   “HELLO”<br>保留字 <span class="hljs-keyword">mov</span> <span class="hljs-keyword">lea</span> <span class="hljs-keyword">add</span> <span class="hljs-keyword">sub</span> jcc 寄存器 属性 <span class="hljs-built_in">db</span> <span class="hljs-built_in">dword</span> 运算符<br>标识符 第一个字符是有限制的，标识符不能与保留字相同<br>伪指令 data offset<br>指令 <span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>，<span class="hljs-number">123</span><br>注释 ；<br></code></pre></td></tr></table></figure>

<p>定义数据类型  </p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">整数：<br><span class="hljs-built_in">BYTE</span> <span class="hljs-number">8</span>位（无符号） SBYTE（有符号，汇编） <br><span class="hljs-built_in">WORD</span> <span class="hljs-number">16</span>位（无符号） SWORD（有符号）<br><span class="hljs-built_in">DWORD</span> <span class="hljs-number">32</span>位（无符号）SDWORD（有符号）<br>FWORD <span class="hljs-number">48</span>位（无符号）保护模式的远指针  SFWORD（有符号）<br><span class="hljs-built_in">QWORD</span> <span class="hljs-number">64</span>位 整数<br>TBYTE <span class="hljs-number">80</span>位 整数<br>实数：<br>REAL4 <span class="hljs-number">32</span>位 短实数<br>REAL8 <span class="hljs-number">64</span>位 长实数<br>REAL10 <span class="hljs-number">80</span>位 拓展实数<br>伪指令：<br><span class="hljs-built_in">db</span> <span class="hljs-number">8</span>位整数 char ASCII<br><span class="hljs-built_in">dw</span> <span class="hljs-number">16</span>位整数<br><span class="hljs-built_in">dd</span> <span class="hljs-number">32</span>为整数或者实数<br><span class="hljs-built_in">dq</span> <span class="hljs-number">64</span>位整数或者实数<br><span class="hljs-built_in">dt</span> <span class="hljs-number">80</span>位的整数<br>大端序与小端序：<br>大：<span class="hljs-number">12345678</span><br>小：<span class="hljs-number">78563412</span><br></code></pre></td></tr></table></figure>

<p>数据传送指令：</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>,<span class="hljs-number">1</span><br><span class="hljs-keyword">mov</span> reg32，imm32<br>操作数类型<br>立即数；寄存器操作数 <span class="hljs-built_in">eax</span> <span class="hljs-built_in">ebx</span>；内存操作数<br><br>reg 通用寄存器 <br>sreg 段寄存器<br>imm 立即数<br>mem 内存<br><br><span class="hljs-keyword">mov</span> 目的操作数，源操作数（两个位数相同，不能同时为内存操作数）<br><span class="hljs-keyword">mov</span> reg，reg<br><span class="hljs-keyword">mov</span> mem，reg<br><span class="hljs-keyword">mov</span> reg，mem<br><span class="hljs-keyword">mov</span> mem，imm<br><span class="hljs-keyword">mov</span> reg，imm<br><span class="hljs-keyword">mov</span> mem，mem 得写成 <span class="hljs-keyword">mov</span> reg，mem       <span class="hljs-keyword">mov</span> mem reg<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>,<span class="hljs-built_in">cx</span> 得写成 <span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>，FFFFFFFF <span class="hljs-keyword">mov</span> <span class="hljs-built_in">ax</span>，<span class="hljs-built_in">cx</span><br><span class="hljs-built_in">eax</span> = <span class="hljs-number">101010101010101010</span><br><span class="hljs-built_in">cx</span> = <span class="hljs-number">10101010</span><br><span class="hljs-number">00000000110101010</span><br><br><span class="hljs-keyword">movzx</span><br><span class="hljs-keyword">movzx</span> <span class="hljs-built_in">eax</span>，<span class="hljs-built_in">cx</span> 可以（全<span class="hljs-number">0</span>拓展）<br><span class="hljs-built_in">eax</span> = <span class="hljs-number">101010101010101010</span><br><span class="hljs-built_in">cx</span> = <span class="hljs-number">10101010</span><br><span class="hljs-number">0000000010101010</span><br><br><span class="hljs-keyword">movsx</span><br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>，<span class="hljs-built_in">cx</span><br><span class="hljs-built_in">eax</span> = <span class="hljs-number">101010101010101010</span><br><span class="hljs-built_in">cx</span> = <span class="hljs-number">10101010</span><br><span class="hljs-number">111111111110101010</span><br><br><span class="hljs-keyword">LAHF</span> //加载标志位到<span class="hljs-number">AH</span>（<span class="hljs-built_in">ax</span>的高八位）中<br><span class="hljs-keyword">lahf</span><br><span class="hljs-keyword">mov</span> flag（<span class="hljs-number">8</span>位整数），<span class="hljs-number">ah</span><br><br><span class="hljs-keyword">sahf</span>  //拷贝回标志位寄存器<br><span class="hljs-keyword">mov</span> <span class="hljs-number">ah</span>，flag<br><span class="hljs-keyword">sahf</span><br><br><span class="hljs-keyword">xchg</span> //交换指令<br><span class="hljs-keyword">xchg</span> reg，reg<br><span class="hljs-keyword">xchg</span> reg，mem<br><span class="hljs-keyword">xchg</span> mem，reg<br></code></pre></td></tr></table></figure>

<p>加法与减法</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-keyword">add</span><br><span class="hljs-keyword">add</span> 操作数<span class="hljs-number">1</span> 操作数<span class="hljs-number">2</span> （操作数类型和<span class="hljs-keyword">mov</span>相同）<br><br><span class="hljs-keyword">sub</span><br><span class="hljs-keyword">sub</span> 操作数<span class="hljs-number">1</span> 操作数<span class="hljs-number">2</span>（操作数类型和<span class="hljs-keyword">mov</span>相同）<br><br><span class="hljs-keyword">inc</span>（自增） <span class="hljs-keyword">dec</span>（自减）<br><br><span class="hljs-keyword">neg</span> 取反符号位也取<br></code></pre></td></tr></table></figure>

<p>数据相关的运算符和伪指令</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-meta">.data</span><br>szStr <span class="hljs-built_in">db</span> “hello <span class="hljs-built_in">word</span>”,<span class="hljs-number">0</span><br>num <span class="hljs-built_in">dword</span> <span class="hljs-number">5</span><br>arrNum <span class="hljs-built_in">dword</span> <span class="hljs-number">0</span>，<span class="hljs-number">1</span>，<span class="hljs-number">2</span>，<span class="hljs-number">3</span>，<span class="hljs-number">4</span>，<span class="hljs-number">5</span><br>var1 <span class="hljs-built_in">db</span> ？<br><br>offset 获取距离段起始位置的偏移<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span> offset var1<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span> offset arrNum + <span class="hljs-number">4</span><br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>，【<span class="hljs-built_in">eax</span>】 //【】是取地址里面的内容，间接寻址<br><br><span class="hljs-built_in">ptr</span> 用来指定操作数的类型或尺寸<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">ax</span>，<span class="hljs-built_in">word</span> <span class="hljs-built_in">ptr</span> num //取低十六位<br><br>type 返回当前元素大小<br><br>lengthof 返回数组中元素个数<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>，offset lengthof arrNum<br><br>sizeof 返回数组占的空间<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>，sizeof arrNum<br></code></pre></td></tr></table></figure>

<p>间接寻址</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">pbyte typedef <span class="hljs-built_in">ptr</span> <span class="hljs-built_in">byte</span> //typedef<br><span class="hljs-meta">.data</span><br>asd pbyte　<span class="hljs-number">1</span><br>var <span class="hljs-built_in">byte</span> <span class="hljs-number">0</span>，<span class="hljs-number">1</span>，<span class="hljs-number">2</span>，<span class="hljs-number">3</span>，<span class="hljs-number">4</span>，<span class="hljs-number">5</span>，<span class="hljs-number">6</span>，<span class="hljs-number">7</span>，<span class="hljs-number">8</span><br><br><span class="hljs-keyword">xor</span> <span class="hljs-built_in">eax</span>, <span class="hljs-built_in">eax</span> //清零<br><span class="hljs-keyword">xor</span> <span class="hljs-built_in">ebx</span>, <span class="hljs-built_in">ebx</span><br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>, offset var<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">bl</span>, [<span class="hljs-built_in">eax</span>]<br><span class="hljs-keyword">inc</span> <span class="hljs-built_in">eax</span> //<span class="hljs-built_in">byte</span> 是一个字节，加<span class="hljs-number">1</span>到数组下一个元素<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">bl</span>, [<span class="hljs-built_in">eax</span>]<br><span class="hljs-keyword">inc</span> <span class="hljs-built_in">eax</span><br>... //完成遍历<br><br><span class="hljs-keyword">xor</span> <span class="hljs-built_in">eax</span>, <span class="hljs-built_in">eax</span> //清零<br><span class="hljs-keyword">xor</span> <span class="hljs-built_in">ebx</span>, <span class="hljs-built_in">ebx</span><br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>, offset var<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">bl</span>, [<span class="hljs-built_in">eax</span>]<br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">bl</span>, [<span class="hljs-built_in">eax</span> + <span class="hljs-number">1</span>] //<span class="hljs-built_in">word</span> +<span class="hljs-number">2</span>, <span class="hljs-built_in">dword</span> + <span class="hljs-number">4</span><br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">bl</span>, [<span class="hljs-built_in">eax</span> + <span class="hljs-number">2</span>]<br>...<br><br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">esi</span>, <span class="hljs-number">4</span><br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>,var[<span class="hljs-built_in">esi</span> * <span class="hljs-number">1</span>] //<span class="hljs-number">1</span>是数据宽度，结果取得是<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>

<p>JMP和LOOP</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">jmp</span> //无条件跳转<br><br><span class="hljs-built_in">ecx</span>是<span class="hljs-keyword">loop</span>的计数器<br><span class="hljs-keyword">xor</span> <span class="hljs-built_in">eax</span>，<span class="hljs-built_in">eax</span><br><span class="hljs-keyword">mov</span> <span class="hljs-built_in">ecx</span>，<span class="hljs-number">10</span><br>lp：<br>	<span class="hljs-keyword">inc</span> <span class="hljs-built_in">eax</span><br>	<span class="hljs-keyword">loop</span> lp<br><span class="hljs-meta">	</span><br><span class="hljs-meta">.data</span><br>source <span class="hljs-built_in">byte</span> <span class="hljs-string">&quot;hello world&quot;</span>,<span class="hljs-number">0</span><br>target <span class="hljs-built_in">byte</span> sizeof source dup(<span class="hljs-number">0</span>)<br><br>main proc //执行拷贝<br>	<span class="hljs-keyword">mov</span> <span class="hljs-built_in">esi</span>,<span class="hljs-number">0</span><br>	<span class="hljs-keyword">mov</span> <span class="hljs-built_in">ecx</span>,sizeof source<br><span class="hljs-symbol">lp:</span>	<br>	<span class="hljs-keyword">mov</span> <span class="hljs-built_in">al</span>,source[<span class="hljs-built_in">esi</span> * <span class="hljs-number">1</span>]<br>	<span class="hljs-keyword">mov</span> target[<span class="hljs-built_in">esi</span> * <span class="hljs-number">1</span>],<span class="hljs-built_in">al</span><br>	<span class="hljs-keyword">inc</span> <span class="hljs-built_in">esi</span><br>	<span class="hljs-keyword">loop</span> lp<br>	<span class="hljs-keyword">push</span> <span class="hljs-number">0</span><br>	<span class="hljs-keyword">call</span> ExitProcess<br>	<span class="hljs-keyword">add</span> <span class="hljs-built_in">esp</span>，<span class="hljs-number">4</span> //堆栈平衡<br><br></code></pre></td></tr></table></figure>

<p>堆栈操作</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">栈：先进后出<br><br><span class="hljs-keyword">push</span> <span class="hljs-built_in">esp</span> - <span class="hljs-number">4</span><br><span class="hljs-keyword">pop</span> <span class="hljs-built_in">esp</span>　+ <span class="hljs-number">4</span><br><br><span class="hljs-keyword">pushfd</span> <span class="hljs-keyword">popfd</span> 把<span class="hljs-number">32</span>位标志位寄存器压入栈中<br><br><span class="hljs-keyword">pushad</span> <span class="hljs-keyword">popad</span> 通用寄存器压栈<br>按<span class="hljs-built_in">eax</span> <span class="hljs-built_in">ecx</span> <span class="hljs-built_in">edx</span> <span class="hljs-built_in">esp</span> <span class="hljs-built_in">ebp</span> <span class="hljs-built_in">esi</span> <span class="hljs-built_in">edi</span>顺序压栈<br><br><span class="hljs-keyword">pusha</span> <span class="hljs-keyword">popa</span> <span class="hljs-number">16</span>位<br><br>字符串逆序<br><span class="hljs-meta">.data</span> <br>source <span class="hljs-built_in">byte</span> <span class="hljs-string">&quot;hello world&quot;</span>,<span class="hljs-number">0</span><br>sourcesize = ($ - source) - <span class="hljs-number">1</span><br><span class="hljs-meta">.code</span><br>main proc<br>	<span class="hljs-keyword">mov</span> <span class="hljs-built_in">ecx</span>,sourcesize<br>	<span class="hljs-keyword">mov</span> <span class="hljs-built_in">esi</span>,<span class="hljs-number">0</span><br><span class="hljs-symbol">lp1:</span><br>	<span class="hljs-keyword">movzx</span> <span class="hljs-built_in">eax</span>,source[<span class="hljs-built_in">esi</span> * <span class="hljs-number">1</span>] //数据传送指令<span class="hljs-keyword">MOV</span>的变体。无符号扩展，并传送。<br>	<span class="hljs-keyword">push</span> <span class="hljs-built_in">eax</span><br>	<span class="hljs-keyword">inc</span> <span class="hljs-built_in">esi</span><br>	<span class="hljs-keyword">loop</span> lp1<br>	<span class="hljs-keyword">mov</span> <span class="hljs-built_in">ecx</span>,sourcesize<br>	<span class="hljs-keyword">mov</span> <span class="hljs-built_in">esi</span>,<span class="hljs-number">0</span><br><span class="hljs-symbol">lp2:</span><br>	<span class="hljs-keyword">pop</span> <span class="hljs-built_in">eax</span><br>	<span class="hljs-keyword">mov</span> source[<span class="hljs-built_in">esi</span>],<span class="hljs-built_in">al</span><br>	<span class="hljs-keyword">inc</span> <span class="hljs-built_in">esi</span><br>	<span class="hljs-keyword">loop</span> lp2<br>	<span class="hljs-keyword">push</span> <span class="hljs-number">0</span><br>	<span class="hljs-keyword">call</span> ExitProcess<br>	<span class="hljs-keyword">add</span> <span class="hljs-built_in">esp</span>,<span class="hljs-number">4</span><br>main ENDP<br>END main<br></code></pre></td></tr></table></figure>

<p>定义函数</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">call</span> <br><span class="hljs-number">1.</span><span class="hljs-built_in">eip</span>压栈   <span class="hljs-number">2.</span><span class="hljs-keyword">jmp</span>到函数处<br><br><span class="hljs-keyword">ret</span><br><span class="hljs-number">1.</span><span class="hljs-keyword">pop</span> <span class="hljs-built_in">eip</span> <span class="hljs-number">2.</span>jum <span class="hljs-built_in">eip</span><br><br>addx proc uses <span class="hljs-built_in">esi</span> <span class="hljs-built_in">ecx</span><br>	<span class="hljs-keyword">add</span> <span class="hljs-built_in">esi</span>,<span class="hljs-built_in">ecx</span><br>	<span class="hljs-keyword">mov</span> <span class="hljs-built_in">eax</span>,<span class="hljs-built_in">esi</span><br>	<span class="hljs-keyword">ret</span><br>addx ENDP<br><br>mian proc<br>	<span class="hljs-keyword">mov</span> <span class="hljs-built_in">esi</span>,<span class="hljs-number">5</span><br>	<span class="hljs-keyword">mov</span> <span class="hljs-built_in">ecx</span>,<span class="hljs-number">6</span><br>	<span class="hljs-keyword">push</span> <span class="hljs-built_in">esi</span><br>	<span class="hljs-keyword">push</span> <span class="hljs-built_in">ecx</span><br>	<span class="hljs-keyword">call</span> addx<br>main endp<br>end main<br></code></pre></td></tr></table></figure>

<p>布尔与比较指令</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">test  </span>//测试某位是不是1 运算逻辑就是and 不修改eax的值，改标志位寄存器<br>eflags <br><span class="hljs-keyword">test </span>eax 00000001<br><br>cmp //原理是相减 不修改操作数，修改标志位<br>cmp o1，o2<br>o1 &gt; o2 // zf = 0， cf = 1	//无符号数 sf != of<br>o1 &lt; o2 //zf = 0， cf = 0	//sf = of<br>o1 = 02 //zf = 1 ，cf = 0	//zf = 1<br>zf 零标志位； cf 进位标志位； sf 符号标志位； of 溢出标志位<br><br></code></pre></td></tr></table></figure>

<p>条件跳转指令</p>
<table>
<thead>
<tr>
<th align="center">JCC指令</th>
<th align="center">解释</th>
<th align="center">英文原文</th>
<th align="center">检查符号位</th>
<th align="center">应用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">JZ</td>
<td align="center">如果为0则跳转</td>
<td align="center">jump if zero</td>
<td align="center">ZF &#x3D; 1</td>
<td align="center">if（i &#x3D;&#x3D; 0）</td>
</tr>
<tr>
<td align="center">JE</td>
<td align="center">如果相等则跳转</td>
<td align="center">jump if equal</td>
<td align="center">ZF &#x3D; 1</td>
<td align="center">if（i &#x3D;&#x3D; j）</td>
</tr>
<tr>
<td align="center">JNZ</td>
<td align="center">若为0则不跳转</td>
<td align="center">jump if not zero</td>
<td align="center">ZF &#x3D; 0</td>
<td align="center">if（i !&#x3D; 0）</td>
</tr>
<tr>
<td align="center">JNE</td>
<td align="center">若不相等则跳转</td>
<td align="center">jump if not equal</td>
<td align="center">ZF &#x3D; 0</td>
<td align="center">if（i !&#x3D; j)</td>
</tr>
<tr>
<td align="center">JS</td>
<td align="center">若为负数则跳转</td>
<td align="center">jump if sign</td>
<td align="center">SF &#x3D; 1</td>
<td align="center">if（i &lt; 0)</td>
</tr>
<tr>
<td align="center">JNS</td>
<td align="center">若不为负数则跳转</td>
<td align="center">jump if not sign</td>
<td align="center">SF &#x3D; 0</td>
<td align="center">if (i &gt; 0)</td>
</tr>
<tr>
<td align="center">JP&#x2F;JPE</td>
<td align="center">若1出现的次数为偶数跳转</td>
<td align="center">jump if parity（even）</td>
<td align="center">PF &#x3D; 1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JNP&#x2F;JPO</td>
<td align="center">若1出现的次数为奇数跳转</td>
<td align="center">jump if not party（odd）</td>
<td align="center">PF &#x3D; 0</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JO</td>
<td align="center">若溢出则为0</td>
<td align="center">jump if overflow</td>
<td align="center">OF &#x3D; 1</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JNO</td>
<td align="center">若无溢出则跳转</td>
<td align="center">jump if not overflow</td>
<td align="center">OF &#x3D; 0</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JC</td>
<td align="center">若进位则跳转</td>
<td align="center">jump if carry</td>
<td align="center">CF &#x3D;1</td>
<td align="center">if（i &lt; j)</td>
</tr>
<tr>
<td align="center">JB</td>
<td align="center">若低于则跳转</td>
<td align="center">jump if below</td>
<td align="center">CF &#x3D; 1</td>
<td align="center">if（i &lt; j)</td>
</tr>
<tr>
<td align="center">JNAE</td>
<td align="center">若不高于等于则跳转</td>
<td align="center">jump if not above equal</td>
<td align="center">CF &#x3D; 1</td>
<td align="center">if (i &lt; j)</td>
</tr>
<tr>
<td align="center">JNC</td>
<td align="center">若无进位则跳转</td>
<td align="center">jump if not carry</td>
<td align="center">CF &#x3D; 0</td>
<td align="center">if（i  &gt; &#x3D;j )</td>
</tr>
<tr>
<td align="center">JNB</td>
<td align="center">若不小于则跳转</td>
<td align="center">jump if not below</td>
<td align="center">CF &#x3D; 0</td>
<td align="center">if（i &gt;&#x3D; j)</td>
</tr>
<tr>
<td align="center">JAE</td>
<td align="center">若高于等于则跳转</td>
<td align="center">jump if above equal</td>
<td align="center">CF &#x3D; 0</td>
<td align="center">if（i &gt;&#x3D; j )</td>
</tr>
<tr>
<td align="center">JBE</td>
<td align="center">若小于等于则跳转</td>
<td align="center">jump if above equal</td>
<td align="center">CF &#x3D; 1或 ZF &#x3D; 1</td>
<td align="center">if（i &lt;&#x3D; j)</td>
</tr>
<tr>
<td align="center">JNA</td>
<td align="center">若不超过则跳转</td>
<td align="center">jump if not above</td>
<td align="center">CF &#x3D; 1或ZF &#x3D;1</td>
<td align="center">if(i &lt;&#x3D;j)</td>
</tr>
<tr>
<td align="center">JNBE</td>
<td align="center">若不小于相等则跳转</td>
<td align="center">jump if not below equal</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JA</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JL</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JNGE</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JNL</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JGE</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JLE</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JNG</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JNL</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">JG</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<p>JCC指令	中文含义	英文原意	检查符号位	典型C应用<br>JZ&#x2F;JE	若为0则跳转；若相等则跳转	jump if zero;jump if equal	ZF&#x3D;1	if (i &#x3D;&#x3D; j);if (i &#x3D;&#x3D; 0);<br>JNZ&#x2F;JNE	若不为0则跳转；若不相等则跳转	jump if not zero;jump if not equal	ZF&#x3D;0	if (i !&#x3D; j);if (i !&#x3D; 0);<br>JS	若为负则跳转	jump if sign	SF&#x3D;1	if (i &lt; 0);<br>JNS	若为正则跳转	jump if not sign	SF&#x3D;0	if (i &gt; 0);<br>JP&#x2F;JPE	若1出现次数为偶数则跳转	jump if Parity (Even)	PF&#x3D;1	(null)<br>JNP&#x2F;JPO	若1出现次数为奇数则跳转	jump if not parity (odd)	PF&#x3D;0	(null)<br>JO	若溢出则跳转	jump if overflow	OF&#x3D;1	(null)<br>JNO	若无溢出则跳转	jump if not overflow	OF&#x3D;0	(null)<br>JC&#x2F;JB&#x2F;JNAE	若进位则跳转；若低于则跳转；若不高于等于则跳转	jump if carry;jump if below;jump if not above equal	CF&#x3D;1	if (i &lt; j);<br>JNC&#x2F;JNB&#x2F;JAE	若无进位则跳转；若不低于则跳转；若高于等于则跳转；	jump if not carry;jump if not below;jump if above equal	CF&#x3D;0	if (i &gt;&#x3D; j);<br>JBE&#x2F;JNA	若低于等于则跳转；若不高于则跳转	jump if below equal;jump if not above	ZF&#x3D;1或CF&#x3D;1	if (i &lt;&#x3D; j);<br>JNBE&#x2F;JA	若不低于等于则跳转；若高于则跳转	jump if not below equal;jump if above	ZF&#x3D;0或CF&#x3D;0	if (i &gt; j);<br>JL&#x2F;JNGE	若小于则跳转；若不大于等于则跳转	jump if less;jump if not greater equal	SF !&#x3D; OF	if (si &lt; sj);<br>JNL&#x2F;JGE	若不小于则跳转；若大于等于则跳转；	jump if not less;jump if greater equal	SF &#x3D; OF	if (si &gt;&#x3D; sj);<br>JLE&#x2F;JNG	若小于等于则跳转；若不大于则跳转	jump if less equal;jump if not greater	ZF !&#x3D; OF 或 ZF&#x3D;1	if (si &lt;&#x3D; sj);<br>JNLE&#x2F;JG	若不小于等于则跳转；若大于则跳转	jump if not less equal;jump if greater	SF&#x3D;0F 且 ZF&#x3D;0	if(si&gt;sj)</p>
<hr>
<h1 id="1"><a href="#1" class="headerlink" title="1"></a>1</h1><p>函数调用约定</p>
<blockquote>
<p>是函数调用者和被调用的函数体之间关于参数传递、返回值传递、堆栈清除、寄存器使用的一种约定。</p>
</blockquote>
<ul>
<li><h2 id="Cdecl"><a href="#Cdecl" class="headerlink" title="Cdecl"></a>Cdecl</h2></li>
</ul>
<p>声明语法为：</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs d"><span class="hljs-keyword">int</span> <span class="hljs-built_in">function</span> (<span class="hljs-keyword">int</span> a ,<span class="hljs-keyword">int</span> b) <span class="hljs-comment">//不加修饰就是C调用约定 </span><br><span class="hljs-keyword">int</span> __cdecl <span class="hljs-built_in">function</span>(<span class="hljs-keyword">int</span> a,<span class="hljs-keyword">int</span> b)<span class="hljs-comment">//明确指出C调用约定</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>cdecl–C Declaration的缩写，C语言缺省的调用约定</p>
<p>cdecl调用约定意味着：</p>
<ul>
<li>参数从右向左压入堆栈</li>
<li>调用者负责清理堆栈</li>
<li>C调用约定允许函数的参数的个数是不固定的，这也是C语言的一大特色。</li>
<li>仅在函数名前加上一个下划线前缀，格式为_functionname。</li>
</ul>
</blockquote>
<ul>
<li><h2 id="Stdcall"><a href="#Stdcall" class="headerlink" title="Stdcall"></a>Stdcall</h2></li>
</ul>
<p>声明语法为：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">int</span> __stdcall <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> a,<span class="hljs-keyword">int</span> b</span>)</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>stdcall(pascal)–Standard Call的缩写，C++的标准调用方式<br>在Microsoft C++系列的C&#x2F;C++编译器中，常常用PASCAL宏来声明这个调用约定，类似的宏还有WINAPI和CALLBACK。<br>一般WIN32的函数都是__stdcall</p>
<p>stdcall的调用约定意味着：</p>
<ul>
<li>参数从右向左压入堆栈</li>
<li>函数自身清理堆栈</li>
<li>函数名自动加前导的下划线，后面紧跟一个@符号，其后紧跟着参数的尺寸</li>
</ul>
</blockquote>
<ul>
<li><h2 id="fastcall"><a href="#fastcall" class="headerlink" title="fastcall"></a>fastcall</h2></li>
</ul>
<p>声明语法为：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">int</span> fastcall <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> a,<span class="hljs-keyword">int</span> b</span>)</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>fastcall调用约定意味着：</p>
<ul>
<li>函数的第一个和第二个DWORD参数（或者尺寸更小的）通过ecx和edx传递，其他参数通过从右向左的顺序压栈</li>
<li>函数自身清理堆栈</li>
<li>函数名修改规则同stdcall:函数名自动加前导的下划线，后面紧跟一个@符号，其后紧跟着参数的尺寸</li>
</ul>
</blockquote>
<ul>
<li><h2 id="thiscall"><a href="#thiscall" class="headerlink" title="thiscall"></a>thiscall</h2></li>
</ul>
<blockquote>
<p>thiscall一C++类成员缺省的调用约定</p>
<p>thiscall是唯一一个不能明确指明的函数修饰，因为thiscall不是关键字。由于成员函数调用还有一个this指针，因此必须特殊处理，thiscall意味着：</p>
<ul>
<li><p>参数从右向左入栈</p>
</li>
<li><p>如果参数个数不确定，this指针在所有参数压栈后被压入堆栈。如果参数个数确定，this指针通过ecx传递给被调用者。</p>
</li>
<li><p>如果参数个数不确定，调用者清理堆栈，否则函数自己清理堆栈</p>
</li>
<li><p>对于参数个数不定的情况下，类似cdecl，固定时类似于stdcall，</p>
</li>
</ul>
</blockquote>
<ul>
<li><h2 id="C-编译时函数名修饰约定规则："><a href="#C-编译时函数名修饰约定规则：" class="headerlink" title="C++编译时函数名修饰约定规则："></a>C++编译时函数名修饰约定规则：</h2></li>
<li><p><strong>__stdcall调用约定</strong>：</p>
</li>
</ul>
<blockquote>
<p>以“?”标识函数名的开始，后跟函数名；</p>
<p>函数名后面以“@@YG”标识参数表的开始，后跟参数表；</p>
<p>参数表以代号表示：</p>
<p>X–void ，</p>
<p>D–char，</p>
<p>E–unsigned char，</p>
<p>F–short，</p>
<p>H–int，</p>
<p>I–unsigned int，</p>
<p>J–long，</p>
<p>K–unsigned long，</p>
<p>M–float，</p>
<p>N–double，</p>
<p>_N–bool，</p>
<p>PA–表示指针,后面的代号表明指针类型，如果相同类型的指针连续出现，以“0”代替，一个“0”代表一次重复…</p>
</blockquote>
<p>参数表的第一项为该函数的返回值类型，其后依次为参数的数据类型,指针标识在其所指数据类型前；</p>
<p>参数表后以“@Z”标识整个名字的结束，如果该函数无参数，则以“Z”标识结束。</p>
<p>例如:</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">int</span> Test1（<span class="hljs-keyword">char</span> *var1,unsigned <span class="hljs-keyword">long</span>）-----“?Test1@<span class="hljs-meta">@YGHPADK</span><span class="hljs-meta">@Z</span>” <br><span class="hljs-keyword">void</span> Test2（） -----“?Test2@<span class="hljs-meta">@YGXXZ</span>” <br></code></pre></td></tr></table></figure>

<ul>
<li><strong>__cdecl调用约定：</strong>_</li>
</ul>
<p>规则同上面的_stdcall调用约定，只是参数表的开始标识由上面的“@@YG”变为“@@YA”。</p>
<ul>
<li><strong>__fastcall调用约定：</strong>_</li>
</ul>
<p>规则同上面的_stdcall调用约定，只是参数表的开始标识由上面的“@@YG”变为“@@YI”。</p>
<ul>
<li><strong>函数调用约定导致的常见问题</strong></li>
</ul>
<p>如果定义的约定和使用的约定不一致，则将导致堆栈被破坏，导致严重问题，下面是两种常见的问题：</p>
<p>1.函数原型声明和函数体定义不一致</p>
<p>2.DLL导入函数时声明了不同的函数约定</p>
<p><strong>调用函数的代码和被调函数必须采用相同的函数的调用约定，程序才能正常运行。</strong></p>
<hr>
<p>x32是x86架构的32位拓展，向后兼容于16位的x86架构。计算机的CPU一次最多能处理32位数据。，当然32位计算机通常也可以处理16位和8位数据。</p>
<p>x64是x86架构的64位拓展，向后兼容于16位及32位的x86架构。x64于1999年由AMD设计，AMD首次公开64位集以扩展给x86，称为“AMD64”。其后也为英特尔所采用。</p>
<p>x86是一个intel通用计算机系列的标准编号缩写，也标识一套通用的计算机指令集合，X与处理器没有任何关系，它是一个对所有＊86系统的简单的通配符定义。</p>
<p>&#x2F;&#x2F;x96dbg是安装x32dbg和x64dbg用的</p>
<hr>
<p>各种数据类型字节数</p>
<p><img src="https://blogimages-1307841632.cos.ap-guangzhou.myqcloud.com/img/202304131138318.png" srcset="/img/loading.gif" lazyload alt="数据类型字节数"></p>
<hr>
<p>伪指令又称为伪操作，它是<strong>在对源程序汇编期间由汇编程序处理的操作</strong>，它们可以完成如处理器选择、定义程序模式、定义数据、分配存储区、指示程序结束等功能。</p>
<hr>
<h1 id="博客相关"><a href="#博客相关" class="headerlink" title="博客相关"></a>博客相关</h1><p>图片大小</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span> = <span class="hljs-string">xxx.png</span> <span class="hljs-attr">width</span>=<span class="hljs-string">40%</span> /&gt;</span> or <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span> =<span class="hljs-string">xxx.png</span> <span class="hljs-attr">width</span>=<span class="hljs-string">100</span> <span class="hljs-attr">height</span>=<span class="hljs-string">100/</span>&gt;</span><br></code></pre></td></tr></table></figure>



<p>表格：</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">|<span class="hljs-string"> 空格 </span>|<span class="hljs-string"> 空格 </span>|<br></code></pre></td></tr></table></figure>



<p>hexo博客不更新，把.deploy_git文件夹删除，再hexo g -d</p>
<hr>
<h1 id="作业，程序，进程和线程"><a href="#作业，程序，进程和线程" class="headerlink" title="作业，程序，进程和线程"></a>作业，程序，进程和线程</h1><p>进程</p>
<p>一个在内存中运行的应用程序。每个进程都有自己独立的一块内存空间，一个进程可以有多个线程，比如在Windows系统中，一个运行的xx.exe就是一个进程。</p>
<p>线程</p>
<p>进程中的一个执行任务（控制单元），负责当前进程中程序的执行。一个进程至少有一个线程，一个进程可以运行多个线程，多个线程可共享数据。</p>
<p>作业：</p>
<p>作业指用户在一次解决或是一个事务处理过程中要求计算机系统所做的工作的集合。作业由三部分组成，即程序、数据和作业说明书。一个作业可以包含多个程序和多个数据集。作业说明书在系统中生成一个称为作业控制块(job control block，JCB)的表格。该表格登记该作业所要求的资源情况、预计执行时间和执行优先级等。从而，操作系统通过该表了解到作业要求，并分配资源和控制作业中程序和数据的编译、链接、装入和执行等。</p>
<p>作业是由一系列有序的步骤组成的。作业的完成要经过作业提交、作业收容、作业执行和作业完成4个阶段。在执行一个作业可能会运行多个不同的进程。</p>
<p>需要说明的是，作业的概念主要用在批处理系统中，而且，在批处理系统中，作业是抢占内存的基本单位。也就是说，批处理系统以作业为单位把程序和数据调入内存以便执行。</p>
<p>程序：</p>
<p>程序是一组有序指令的集合，并存放于某种介质中，是一个静态概念。</p>
<p>进程：</p>
<p>进程是为使程序能并发执行，且为了对并发执行的程序加以描述和控制而引入的概念。</p>
<p>在了解进程前，先说明下进程实体。进程实体是由程序段、相关的数据段和PCB三部分组成，是一个能独立运行、独立分配资源和独立接受调动的基本单位。</p>
<p>现在来说明进程的定义：进程是进程实体的一次执行过程，是系统进行资源分配和调度的一个独立单位。它是一个动态概念。</p>
<p>线程：</p>
<p>随着多处理机系统的发展，提高程序的并发执行程度的要求越来越高。为提高系统的并发执行度，进而引入了线程的概念。线程是比进程更小的能独立运行的基本单位（故又称“轻型进程”），更好的提高了程序的并发执行程度充分发挥了多处理机的优势。</p>
<hr>
<p>RAM是<strong>随机存取存储器</strong>（random access memory），是计算机<strong>内部存储器</strong>中的一种，也是其中最重要的，计算机和手机中一般把其叫做<strong>（运行）内存</strong>，它的速度要比硬盘快得多，所以用运行程序在RAM中，而存放运行时不用的数据则在硬盘中，什么时候需要数据，便把数据从硬盘中拿到内存，但同时RAM断电会丢失数据，所以我们电脑如果断电了就会丢失原来正在运行的数据。所以，手机中的RAM和电脑中的RAM的概念是相同的，RAM即内存越大，能同时在内存中执行的程序就越多，性能一般是越好的。</p>
<p>ROM是<strong>只读存储器（Read-Only Memory）</strong>，也是计算机<strong>内部存储器</strong>中的一种，而硬盘是<strong>外部存储器</strong>，<strong>所以对于大学学子来说，考试时你如果把这两个混为一种东西绝对是错误的</strong>，当然，如果出选择题让你选，那么BIOS应该是用到ROM的那个。那么ROM究竟是干什么的，ROM和硬盘是否就没有任何关系呢？这就要从其发展历程说起，早期，乃至现在，我们的主要存储介质都是<strong>磁性存储</strong>，也就是磁盘，分为硬盘和软盘，硬盘不太适合做移动存储，因为其磁头容易损坏，不耐摔，而且体积较大，就算是缩小容量仍然很难缩小其体积，软盘虽然用作移动介质还算方便，但软盘容量过于小，不够用，而光盘虽然容量大但不易擦写，同时体积也不够小，这时就很适合使用<strong>半导体存储介质</strong>——ROM和RAM，ROM用来嵌入电脑主板或者做移动存储介质就很合适了，其体积够小，提供的容量可以比光盘和软盘的大，速度也更快，但成本相对更高，而且早期的ROM因为技术不成熟所以无法擦写，出厂后就只能读数据，所以叫只读存储器，后来随着技术的发展，在ROM的基础上出现了新的半导体存储介质<strong>EPROM和EEPROM</strong>，这两种可擦写，这就不符合ROM的命名，但是由于是在ROM的技术上衍变出来的，所以延用了一部分原来的叫法，此时非易失的半导体存储介质开始得以广泛应用，被大量用于电脑主板的bios和嵌入式存储，而后来在这两种技术的发展上又发展出了<strong>NAND FLASH闪存，</strong>这就是我们现在用的U盘中用到的技术，同样，因为其体积小，容量和速度均不错，现在手机存储中的emmc颗粒也是用的这种技术，所以有手机厂商就把手机的存储容量约定俗成为ROM，其继承ROM断电不丢失数据的特性，而且有着较快的速度。</p>
<p>那么电脑硬盘和ROM有什么关系呢？由于ROM和硬盘都可以存储数据而且断电不会丢失，而有都广泛运用于电子产品中，所以有人就对两者产生了混淆。硬盘分为两种，一种是<strong>机械硬盘</strong>（即磁盘HDD）,一种是<strong>固态硬盘（SSD），</strong>磁盘和ROM没什么关系，但是固态硬盘就不一样了，固态硬盘用到的颗粒也是<strong>基于NAND FLASH技术</strong>，和u盘以及手机存储有点相似，所以说硬盘和ROM还是有关系的，固态硬盘的存储颗粒是ROM技术发展的产物，<strong>但不能说ROM就是硬盘。</strong></p>
<hr>
<p>编译器就是将“一种语言（通常为<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%AB%98%E7%BA%A7%E8%AF%AD%E8%A8%80/299113?fromModule=lemma_inlink">高级语言</a>）”翻译为“另一种语言（通常为低级语言）”的程序。一个现代编译器的主要<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/7870986?fromModule=lemma_inlink">工作流程</a>：<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%BA%90%E4%BB%A3%E7%A0%81/3969?fromModule=lemma_inlink">源代码</a> (source code) → <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/9067800?fromModule=lemma_inlink">预处理器</a> (preprocessor) → 编译器 (compiler) → <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%9B%AE%E6%A0%87%E4%BB%A3%E7%A0%81/9407934?fromModule=lemma_inlink">目标代码</a> (object code) → <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%93%BE%E6%8E%A5%E5%99%A8/10853221?fromModule=lemma_inlink">链接器</a> (Linker) → 可执行程序 (executables)</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>一些东西</div>
      <div>http://example.com/2022/10/01/一些东西/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>luo</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年10月1日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="NC - 非商业性使用">
                <i class="iconfont icon-nc"></i>
              </span>
              </a>
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="SA - 相同方式共享">
                <i class="iconfont icon-sa"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/03/27/%E6%B1%87%E7%BC%96%E5%AD%A6%E4%B9%A0/" title="汇编学习">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">汇编学习</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/10/01/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E4%B8%9C%E8%A5%BF/" title="杂七杂八的东西">
                        <span class="hidden-mobile">杂七杂八的东西</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://beian.miit.gov.cn/" target="_blank">闽ICP备2021015815号-2</a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
